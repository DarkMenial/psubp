<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Dashboard</title>
  <link rel="stylesheet" href="../../styles/modern-normalize.css">
  <link rel="stylesheet" href="../../styles/create-post.css">
  <link rel="stylesheet" href="../../styles/post.css">
  <link rel="stylesheet" href="../../styles/dashboard.css">
  <link rel="stylesheet" href="../../styles/utils.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
  <link href="https://fonts.googleapis.com/css?family=Poppins:400,700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Roboto+Slab:400,700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Lora:400,700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Playfair+Display:400,700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700&display=swap" rel="stylesheet">
</head>
<body>
  <nav class="top-nav">
    <div class="nav-content container">
    <div class="logo">
      <img src="../public/logo.png" alt="Logo">
      <span>PSU</span>
      BP
    </div>
    <div class="right-section">
      <div class="user-profile">
        <div class="account-icon">
          <i class="fas fa-user"></i>
        </div>
        <div class="user-info">
          <span class="username">Department Name</span>
          <i class="fas fa-caret-down"></i>
        </div>
        <div class="logout">
          <span>Logout</span>
        </div>
      </div>
    </div>
  </nav>

  <aside class="sidebar container">
    <div class="sidebar-toggle">
      <i class="fas fa-bars"></i>
      </div>
      <ul class="sidebar-menu">
        <li><a href="./dashboard.html"><i class="fas fa-tachometer-alt"></i> DASHBOARD</a></li>
        <li><a href="./index.html"><i class="fas fa-pencil-alt"></i> POST</a></li>
        <!-- <li class="has-dropdown">
          <a href="#"><i class="fas fa-bullhorn"></i> ANNOUNCEMENTS <i class="fas fa-chevron-right"> </i></a>
          <ul class="dropdown-menu">
            <li><a href="#">Main Feature</a></li>
            <li><a href="#">Sub Featured</a></li>
          </ul>
        </li> -->
        <!-- <li><a href="#"><i class="fas fa-images"></i> MEDIACOLLECTION</a></li> -->
        <li class="has-dropdown">
          <a href="#"><i class="fas fa-users"></i> USER MANAGEMENT <i class="fas fa-chevron-right"></i></a>
          <ul class="dropdown-menu">
            <li><a href="#">User Profiles</a></li>
            <li><a href="#">Accounts</a></li>
            <li><a href="#">Roles</a></li>
            <li><a href="#">Permissions</a></li>
          </ul>
        </li>
        <li><a href="./faculty_and_staff.html"><i class="fas fa-chalkboard-teacher"></i> FACULTY & STAFF</a></li>
        <!-- <li><a href="#"><i class="fas fa-sitemap"></i> ORGANIZATIONAL CHART</a></li> -->
        <!-- <li class="has-dropdown">
          <a href="#"><i class="fas fa-clipboard-list"></i> PROGRAMS/DEPARTMENTS <i class="fas fa-chevron-right"></i></a>
          <ul class="dropdown-menu">
            <li><a href="#">Information Technology</a></li>
            <li><a href="#">Education</a></li>
            <li><a href="#">Criminology</a></li>
            <li><a href="#">Business Administration</a></li>
            <li><a href="#">Agriculture</a></li>
            <li><a href="#">Hospitality Management</a></li>
          </ul>
        </li> -->
        <!-- <li><a href="#"><i class="fas fa-chart-bar"></i> ANALYTICS</a></li> -->
        <li><a href="#"><i class="fas fa-archive"></i> ARCHIVE</a></li>
        <li><a href="#"><i class="fas fa-info-circle"></i> INFORMATION</a></li>
        <li><a href="#"><i class="fas fa-database"></i> BACKUP/RESTORE</a></li>
        <li><a href="#"><i class="fas fa-sign-out-alt"></i> LOGOUT</a></li>
      </ul>
        </aside>



        <main class="page-wrapper"> 



          <div class="add-post-container">
            <form action="./php/process_post.php" method="POST">
              <div class="form-row">
                <div class="form-column">
                  <label for="title">Title:</label>
                  <input type="text" id="title" name="title" required>
                </div>
              </div>
          
              <!-- TOPIC and ADD PHOTO -->
              <div class="form-row">
                <div class="form-column">
                  <select id="topic" name="topic" required onchange="handleTopicChange()">
                    <option value="">Select Topic</option>
                    <option value="article">Article</option>
                    <option value="event">Event</option>
                    <option value="announcement">Announcement</option>
                  </select>
                </div>
          
                <div class="form-column">
                  <label class="custom-file-upload" id="choose-file-label">
                    <i class="fas fa-image"></i> Choose Image
                    <input type="file" id="file-upload" name="image" accept="image/*" onchange="previewImage(event)">
                  </label>
                  <div class="image-preview-container">
                    <div id="discard-container" style="display: none; position: relative;">
                      <button type="button" id="discard-image" onclick="discardImage()" style="position: absolute; top: 0px; right: 0;"><i class="fas fa-times-circle"></i></button>
                    </div>
                    <img id="image-preview" src="#" alt="Image Preview" style="display: none; max-width: 200px; margin-top: 10px; margin-left: auto;">
                  </div>
                </div>
              </div>
          
              <div>
                <label for="content">Content:</label>
                <textarea id="content" name="content" rows="5" required></textarea>
              </div>
          
              <div class="form-row">
                <div class="form-column">
                  <button type="submit">Save</button>
                  <button type="button">Discard</button>
                </div>
          
                <div class="form-column">
                  <label for="publish">Publish:</label>
                  <input type="checkbox" id="publish" name="publish">
                </div>
              </div>
          
              <div class="form-column">
                <div class="auto-archive-container">
                  <label for="auto-archive" class="checkbox-label">
                    <input type="checkbox" id="auto-archive" name="auto-archive" onchange="handleAutoArchiveChange()">
                    Auto Archive
                  </label>
                  <label for="auto-archive-date" class="auto-archive-label">Auto Archive Date:</label>
                  <input type="date" id="auto-archive-date" name="auto-archive-date" class="auto-archive-date-input" disabled>
                </div>
              </div>
          
              <div id="duration-container" style="display: none;">
                <div>
                  <label for="start-date">Start Date:</label>
                  <input type="date" id="start-date" name="start-date">
                </div>
                <div>
                  <label for="end-date">End Date:</label>
                  <input type="date" id="end-date" name="end-date">
                </div>
              </div>
            </form>
          </div>
          



        </main>
       
      </div>
      
     
      </body>
     
<script>

function previewImage(event) {
  var file = event.target.files[0];
  var imagePreview = document.getElementById('image-preview');
  var discardContainer = document.getElementById('discard-container');
  var chooseFileLabel = document.getElementById('choose-file-label');

  if (file) {
    var reader = new FileReader();

    reader.onload = function(event) {
      imagePreview.src = event.target.result;
      imagePreview.style.display = 'block';
      discardContainer.style.display = 'block';
      chooseFileLabel.style.display = 'none';
    }

    reader.readAsDataURL(file);
  } else {
    imagePreview.style.display = 'none';
    discardContainer.style.display = 'none';
    chooseFileLabel.style.display = 'block';
  }
}

function discardImage() {
  var fileUpload = document.getElementById('file-upload');
  fileUpload.value = '';
  var imagePreview = document.getElementById('image-preview');
  imagePreview.src = '#';
  imagePreview.style.display = 'none';
  var discardContainer = document.getElementById('discard-container');
  discardContainer.style.display = 'none';
  var chooseFileLabel = document.getElementById('choose-file-label');
  chooseFileLabel.style.display = 'block';
}


 // Get the necessary elements
 const autoArchiveCheckbox = document.getElementById('auto-archive');
  const autoArchiveDateInput = document.getElementById('auto-archive-date');

  // Add event listener to the auto archive checkbox
  autoArchiveCheckbox.addEventListener('change', () => {
    if (autoArchiveCheckbox.checked) {
      autoArchiveDateInput.disabled = false;
      const endDate = new Date();
      endDate.setDate(endDate.getDate() + 7); // Set the default auto archive date to 7 days from today
      const endDateString = endDate.toISOString().slice(0, 10); // Format the end date as yyyy-mm-dd
      autoArchiveDateInput.value = endDateString;
    } else {
      autoArchiveDateInput.disabled = true;
      autoArchiveDateInput.value = '';
    }
  });

     </script>

<script>
  // Get the necessary elements
  const topicSelect = document.getElementById('topic');
  const durationContainer = document.getElementById('duration-container');
  const startDateInput = document.getElementById('start-date');
  const endDateInput = document.getElementById('end-date');

  // Function to handle topic change
  function handleTopicChange() {
    const selectedTopic = topicSelect.value;
    if (selectedTopic === 'event' || selectedTopic === 'announcement') {
      durationContainer.style.display = 'block';
    } else {
      durationContainer.style.display = 'none';
    }
  }

  // Function to handle auto archive change
  function handleAutoArchiveChange() {
    if (autoArchiveCheckbox.checked) {
      autoArchiveDateInput.disabled = false;
      const endDate = endDateInput.value;
      autoArchiveDateInput.value = endDate;
    } else {
      autoArchiveDateInput.disabled = true;
      autoArchiveDateInput.value = '';
    }
  }
</script>

</html>
